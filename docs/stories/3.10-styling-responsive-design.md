# Story 3.10: Styling & Responsive Design

**Story ID:** 3.10
**Assigned to:** @dev
**Sprint:** Sprint 5 (Week 7)
**Status:** Draft
**Estimation:** 5 story points (2-3 days)

---

## Summary

Apply comprehensive styling and responsive design to all frontend components using Tailwind CSS, ensuring consistent visual design, accessible color contrasts, and mobile-first responsive layouts across desktop, tablet, and mobile viewports.

---

## UX Research Context

This story is a **cross-cutting concern** that applies responsive design and styling to all Epic 3 components, directly supporting:

**Research Insight 4: Mobile-First for Gabriela During Maternity ⭐ (Primary)**
- **Critical Requirement:** Gabriela (Director) will access DecisionLog on **iPad and mobile** during 2-3 month maternity leave
- Mobile/tablet access is **non-negotiable** for product success
- **User Flow:** Gabriela checks projects on iPad during morning coffee, reviews decisions on iPhone between meetings
- **Responsive breakpoints:**
  - **Mobile (375px):** iPhone portrait, 1-column layouts
  - **Tablet (768px):** iPad portrait, 2-column layouts
  - **Desktop (1024px+):** Laptop/desktop, 3-column layouts
- **Touch-friendly targets:** Minimum 44px tap area for buttons, cards, filters (Apple HIG + WCAG)

**Research Insight 2: Digest vs. Deep Dive Split**
- Gabriela's Executive Digest (Story 3.8) must work on **mobile-first**
- Architects' Timeline (Story 3.5) optimized for desktop but functional on tablet

**Research Insight 1: Trust Through Transparency**
- Full transparency maintained across all screen sizes
- No functionality hidden on mobile (may be reorganized, e.g., drawer for filters)

**Design System: Shadcn/ui + Tailwind CSS (from Story 3.1)**
- **Shadcn/ui:** Responsive by default, mobile-friendly components
- **Tailwind CSS:** Mobile-first approach (base styles = mobile, then `md:` tablet, `lg:` desktop)
- **Color system:** Discipline/consensus/impact colors from `tailwind.config.ts` (Story 3.1)
- **Typography:** Responsive font sizes (text-sm on mobile → text-base on desktop)
- **Spacing:** Responsive padding/margins (px-4 on mobile → px-6 tablet → px-8 desktop)

**Accessibility: WCAG 2.1 AA Compliance**
- Color contrast: ≥4.5:1 for all text (required for readability)
- Focus indicators: Visible focus ring on all interactive elements (keyboard navigation)
- Touch targets: ≥44px for mobile (Apple HIG, WCAG 2.5.5)
- Screen reader support: ARIA labels, semantic HTML
- **Why:** DecisionLog is a professional tool, accessibility is a legal/ethical requirement

**Component-Level Responsive Patterns:**
- **Timeline (Story 3.5):** Desktop=sidebar+timeline, Tablet=drawer+timeline, Mobile=drawer+timeline (full width)
- **Filters (Story 3.6):** Desktop=fixed sidebar (320px), Tablet/Mobile=drawer (slide-in overlay)
- **Projects List (Story 3.4):** Desktop=3 columns, Tablet=2 columns, Mobile=1 column
- **DecisionCards (Story 3.5):** Full width on all sizes, content wraps responsively
- **DrillDown Modal (Story 3.7):** Desktop=900px max-width centered, Tablet=95% width, Mobile=full screen

**Performance Requirements (from UX Success Metrics):**
- Dashboard load: <2 seconds on mobile 4G connection
- Smooth interactions: 60 fps scrolling, no janky animations
- Layout shift: CLS <0.1 (Cumulative Layout Shift, no jumpy content)

**Testing Requirements:**
- **Physical devices:** iPhone (375px), iPad (768px), MacBook (1024px+)
- **Browsers:** Safari (iOS/macOS), Chrome (Android/Desktop), Firefox (Desktop)
- **Accessibility audit:** axe-core automated testing, manual keyboard navigation

**Reference:** `docs/ux/RESEARCH-AND-DESIGN-SYSTEM-ANALYSIS.md` (Part 2: Insight 4 "Mobile-First for Gabriela During Maternity")

---

## Acceptance Criteria

### Tailwind CSS Configuration (from Story 3.1)
- [ ] Tailwind config (`tailwind.config.ts`) complete and verified:
  - [ ] **Discipline colors:** `discipline-architecture`, `discipline-mep`, `discipline-landscape`, `discipline-structural`, `discipline-electrical`, `discipline-plumbing`
  - [ ] **Consensus colors:** `consensus-agree`, `consensus-mixed`, `consensus-dissent`
  - [ ] **Impact colors:** `impact-high`, `impact-medium`, `impact-low`
  - [ ] **Shadcn/ui base colors:** border, input, ring, background, foreground, primary, secondary, destructive, muted, accent, popover, card
  - [ ] **Responsive breakpoints:** sm=375px, md=768px, lg=1024px, xl=1280px, 2xl=1536px
  - [ ] **Custom utilities:** borderRadius, keyframes, animations
- [ ] All components use Tailwind classes (no inline styles or CSS files except globals)

### Mobile-First Responsive Design (UX Insight 4)
- [ ] **Mobile (375px-767px):**
  - [ ] 1-column layouts for all grids (Projects, Decisions)
  - [ ] Full-width cards (min 100% width)
  - [ ] Responsive padding: `px-4` (16px)
  - [ ] Touch-friendly tap targets: All buttons/cards ≥44px height or tap area
  - [ ] Filters as drawer (slide-in from left, overlay)
  - [ ] Navigation hamburger menu (if applicable)
  - [ ] Font sizes: text-sm to text-base (14-16px body text)
  - [ ] Drill-down modal: Full screen (100% width/height)
- [ ] **Tablet (768px-1023px):**
  - [ ] 2-column layouts for grids (Projects: 2 columns, Decisions: 1-2 columns)
  - [ ] Responsive padding: `px-6` (24px)
  - [ ] Filters: Drawer (overlay) or fixed sidebar (320px)
  - [ ] Drill-down modal: 95% width, max-height 90vh, scrollable
  - [ ] Font sizes: text-base (16px body text)
- [ ] **Desktop (1024px+):**
  - [ ] 3-column layouts for Projects grid
  - [ ] Filters: Fixed sidebar (320px width, always visible)
  - [ ] Responsive padding: `px-8` (32px)
  - [ ] Drill-down modal: Max-width 900px, centered, max-height 90vh
  - [ ] Font sizes: text-base to text-lg (16-18px body text)

### Component-Specific Responsive Patterns
- [ ] **Projects List (Story 3.4):**
  - [ ] Grid: `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`
  - [ ] ProjectCard: Full width on mobile, 2 columns on tablet, 3 columns on desktop
- [ ] **Timeline (Story 3.5):**
  - [ ] DecisionCards: Full width on all sizes, content wraps
  - [ ] MeetingHeaders: Responsive layout (stack on mobile, inline on desktop)
- [ ] **FilterSidebar (Story 3.6):**
  - [ ] Desktop: `w-80` fixed sidebar (320px)
  - [ ] Tablet/Mobile: Drawer component (Shadcn/ui Sheet) slide-in from left
  - [ ] Filter button visible on mobile: `<lg:block hidden lg:hidden`
- [ ] **DrillDown Modal (Story 3.7):**
  - [ ] Desktop: `max-w-[900px]` centered
  - [ ] Tablet: `w-[95%]` width
  - [ ] Mobile: `w-full h-full` (full screen modal)
- [ ] **Executive Digest (Story 3.8):**
  - [ ] Cards stack on mobile (1 column), 2 columns on tablet, 3 columns on desktop
  - [ ] Metrics responsive layout

### Color Palette Consistency (from Story 3.1)
- [ ] **Discipline colors applied consistently across all components:**
  - Architecture: #3B82F6 (Blue) - `bg-discipline-architecture`
  - MEP: #F97316 (Orange) - `bg-discipline-mep`
  - Landscape: #10B981 (Green) - `bg-discipline-landscape`
  - Structural: #8B5CF6 (Purple) - `bg-discipline-structural`
  - Electrical: #F59E0B (Amber) - `bg-discipline-electrical`
  - Plumbing: #06B6D4 (Cyan) - `bg-discipline-plumbing`
- [ ] **Consensus colors applied to badges:**
  - High (AGREE): #10B981 (Green) - `bg-consensus-agree`
  - Medium (MIXED): #F59E0B (Amber) - `bg-consensus-mixed`
  - Low (DISSENT): #EF4444 (Red) - `bg-consensus-dissent`
- [ ] **Impact colors applied to impact badges:**
  - High: #DC2626 (Red 600) - `bg-impact-high`
  - Medium: #F59E0B (Amber 500) - `bg-impact-medium`
  - Low: #9CA3AF (Gray 400) - `bg-impact-low`
- [ ] **Shadcn/ui semantic colors used for UI elements:**
  - Background, foreground, muted, accent, card, popover

### Accessibility (WCAG 2.1 AA Compliance)
- [ ] **Color contrast ≥4.5:1 for all text:**
  - Verify with browser DevTools or axe-core
  - All discipline/consensus/impact colors meet contrast requirements
  - Use Tailwind opacity if needed (e.g., `bg-discipline-architecture/10` for subtle backgrounds)
- [ ] **Focus indicators visible on all interactive elements:**
  - Shadcn/ui default focus ring: `focus-visible:ring-2 focus-visible:ring-offset-2`
  - Custom focus styles if needed (blue ring, 2px offset)
  - Tab through all components: cards, buttons, inputs, checkboxes
- [ ] **Keyboard navigation working:**
  - Tab through all interactive elements in logical order
  - Enter/Space to activate buttons, checkboxes
  - Escape to close modals, drawers
  - Arrow keys in accordions (Shadcn/ui default)
- [ ] **ARIA labels on all interactive elements:**
  - Buttons: `aria-label` if no text content (icon-only buttons)
  - Icons: `aria-hidden="true"` if decorative, `aria-label` if interactive
  - Form inputs: Associated `<label>` elements
  - Modal: `aria-modal="true"`, `aria-labelledby`, `aria-describedby`
  - Drawer: `aria-label="Filter drawer"`
- [ ] **Touch targets ≥44px (Apple HIG, WCAG 2.5.5):**
  - All buttons: `min-h-[44px]` on mobile
  - Card tap areas: Full card clickable, min 80px height
  - Checkbox tap areas: Label extends tap area (Shadcn/ui default)

### Loading States & Skeletons
- [ ] Loading skeletons styled consistently across all components:
  - Tailwind `animate-pulse` for shimmer effect
  - Skeleton shapes match final content (card-shaped, text-shaped)
  - Skeleton colors: `bg-gray-200` (light gray)
  - Skeleton count matches expected content (e.g., 6 project cards, 3 meeting groups)
- [ ] Skeleton components:
  - ProjectCardSkeleton (Story 3.4)
  - TimelineSkeleton (Story 3.5)
  - No CLS (Cumulative Layout Shift) when content loads

### Error States & Alerts
- [ ] Error states visually distinct:
  - Shadcn/ui `Alert` component with `variant="destructive"`
  - Red color scheme (#EF4444 red)
  - Error icon (AlertCircle from lucide-react)
  - Clear error message text
  - Retry button where applicable (Shadcn/ui `Button` variant="outline")
- [ ] Error states for:
  - API failures (network errors, 500 errors)
  - Empty states (no projects, no decisions)
  - Form validation errors (if applicable)

### Typography & Spacing
- [ ] **Typography scale (Tailwind default with adjustments):**
  - Headings: text-3xl (page titles), text-2xl (section titles), text-xl (card titles)
  - Body text: text-base (16px desktop), text-sm (14px mobile)
  - Small text: text-sm (metadata, timestamps)
  - Line height: leading-relaxed for body text (1.625)
  - Font weight: font-bold for headings, font-medium for emphasis, font-normal for body
- [ ] **Spacing consistency:**
  - Card padding: p-4 (mobile), p-6 (desktop)
  - Section spacing: space-y-6 (vertical), gap-6 (grid)
  - Container padding: px-4 (mobile), px-6 (tablet), px-8 (desktop)

### Performance & Layout Stability
- [ ] **Layout shift (CLS) <0.1:**
  - Skeleton cards match final card dimensions (no jumpy loading)
  - Images have width/height attributes (if applicable)
  - Fonts preloaded (if custom fonts used)
- [ ] **Smooth interactions (60 fps):**
  - CSS transitions: `transition-shadow duration-200` for hover effects
  - No janky scrolling (virtual scrolling for 200+ items if needed)
  - Drawer animations smooth (Shadcn/ui default)

### Testing & Validation
- [ ] **Accessibility audit:**
  - Run axe-core automated tests (npm package: @axe-core/react)
  - Zero critical/serious violations
  - Manual keyboard navigation testing
  - Manual screen reader testing (VoiceOver on macOS/iOS)
- [ ] **Responsive testing:**
  - Test on physical devices: iPhone (375px), iPad (768px), MacBook (1024px+)
  - Test on browser DevTools: Chrome responsive mode, Firefox responsive design mode
  - Test breakpoints: 375px, 768px, 1024px, 1440px
- [ ] **Browser compatibility:**
  - Safari (iOS 15+, macOS latest)
  - Chrome (Desktop, Android latest)
  - Firefox (Desktop latest)
  - Edge (Desktop latest)
- [ ] **Print-friendly styles (optional Phase 2):**
  - Print media query: `@media print`
  - Hide navigation, filters on print
  - Optimize timeline/digest for printing

### Dark Mode Support (Optional Phase 1.5, defer if time-constrained)
- [ ] Dark mode toggle button (optional)
- [ ] Tailwind dark mode classes: `dark:bg-gray-800`, `dark:text-white`
- [ ] Shadcn/ui dark mode support (built-in)
- [ ] Test color contrast in dark mode (WCAG AA)

---

## Tasks

### Task 1: Finalize Tailwind Configuration (0.5 days)

Complete `tailwind.config.ts` with brand colors, discipline colors, custom spacing, typography scale, and responsive breakpoints.

### Task 2: Apply Component Styling (1.5 days)

Style all components (ProjectCard, DecisionCard, Timeline, FilterSidebar, Modal) with consistent spacing, typography, shadows, and hover states.

### Task 3: Responsive Layouts (0.75 days)

Implement mobile-first responsive design, test on common breakpoints (375px, 768px, 1024px, 1440px), and add hamburger menu for mobile navigation.

### Task 4: Accessibility Improvements (0.5 days)

Add ARIA labels, ensure keyboard navigation, verify color contrast, and add focus indicators.

### Task 5: Testing & Validation (0.75 days)

Run accessibility audit (axe-core), test on multiple devices/browsers, validate print styles, and fix visual bugs.

---

## Dev Notes

### Complete Color Palette (from Story 3.1)

```typescript
// tailwind.config.ts - DecisionLog Design System
export default {
  theme: {
    extend: {
      colors: {
        // Shadcn/ui base colors
        border: "hsl(var(--border))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        // ... (other Shadcn/ui colors)

        // DecisionLog Discipline Colors (UX Research)
        discipline: {
          architecture: '#3B82F6',  // Blue
          mep: '#F97316',           // Orange
          landscape: '#10B981',     // Green
          structural: '#8B5CF6',    // Purple
          electrical: '#F59E0B',    // Amber
          plumbing: '#06B6D4',      // Cyan
        },
        // Consensus Colors
        consensus: {
          agree: '#10B981',   // Green
          mixed: '#F59E0B',   // Amber
          dissent: '#EF4444', // Red
        },
        // Impact Severity Colors
        impact: {
          high: '#DC2626',    // Red 600
          medium: '#F59E0B',  // Amber 500
          low: '#9CA3AF',     // Gray 400
        },
      },
      // Mobile-first responsive breakpoints (UX Insight 4)
      screens: {
        'sm': '375px',   // Mobile (iPhone)
        'md': '768px',   // Tablet (iPad portrait)
        'lg': '1024px',  // Desktop (laptop)
        'xl': '1280px',  // Large desktop
        '2xl': '1536px', // Extra large
      },
    },
  },
}
```

### Mobile-First Responsive Grid Pattern

```jsx
// Projects List (Story 3.4)
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  {/* Mobile: 1 column, Tablet: 2 columns, Desktop: 3 columns */}
</div>

// Container padding (responsive)
<main className="px-4 sm:px-6 lg:px-8">
  {/* Mobile: 16px, Tablet: 24px, Desktop: 32px */}
</main>

// Touch-friendly button (mobile)
<button className="min-h-[44px] px-4">
  {/* Minimum 44px tap target */}
</button>

// Responsive modal width
<div className="w-full md:w-[95%] lg:max-w-[900px]">
  {/* Mobile: full width, Tablet: 95%, Desktop: max 900px */}
</div>
```

### Component-Specific Styling Guidelines

**ProjectCard (Story 3.4):**
```jsx
<Card className="cursor-pointer hover:shadow-lg transition-shadow">
  {/* Hover: elevation increase (shadow-md → shadow-lg) */}
  {/* Transition: 200ms smooth */}
</Card>
```

**DecisionCard (Story 3.5):**
```jsx
<Badge className="bg-discipline-mep/10 text-discipline-mep border-discipline-mep/30">
  {/* Discipline badge: 10% opacity background, 30% opacity border */}
</Badge>
```

**FilterSidebar (Story 3.6):**
```jsx
// Desktop
<aside className="hidden lg:block w-80 border-r">
  {/* Fixed sidebar on desktop (320px width) */}
</aside>

// Mobile
<Sheet> {/* Shadcn/ui Drawer */}
  <SheetTrigger className="lg:hidden">
    <Button variant="outline"><Filter /></Button>
  </SheetTrigger>
</Sheet>
```

**DrillDownModal (Story 3.7):**
```jsx
<Dialog>
  <DialogContent className="w-full md:w-[95%] lg:max-w-[900px] max-h-[90vh] overflow-y-auto">
    {/* Responsive modal: full screen mobile, centered desktop */}
  </DialogContent>
</Dialog>
```

---

## File List

**Modified/Created:**
- `tailwind.config.ts` (verify/complete) - Discipline/consensus/impact colors, responsive breakpoints (already done in Story 3.1)
- `src/index.css` (modify) - Global styles, Shadcn/ui CSS variables
- **All Epic 3 component files (modify)** - Apply responsive classes:
  - `src/pages/Projects.tsx` (Story 3.4) - Responsive grid, padding
  - `src/components/molecules/ProjectCard.tsx` (Story 3.4) - Hover states, shadows
  - `src/components/organisms/Timeline.tsx` (Story 3.5) - Responsive layout
  - `src/components/molecules/DecisionCard.tsx` (Story 3.5) - Discipline/consensus/impact colors
  - `src/components/molecules/MeetingGroup.tsx` (Story 3.5) - Responsive meeting headers
  - `src/components/organisms/FilterSidebar.tsx` (Story 3.6) - Desktop sidebar, mobile drawer
  - `src/components/organisms/DrillDownModal.tsx` (Story 3.7) - Responsive modal widths
  - `src/components/organisms/ExecutiveDigest.tsx` (Story 3.8) - Responsive card grid
- `tests/accessibility.test.tsx` (new) - axe-core automated accessibility tests
- `tests/responsive.test.tsx` (new) - Responsive layout tests at breakpoints
- `package.json` (verify) - Ensure @axe-core/react installed for testing

---

## Testing Strategy

- ✅ Responsive design at breakpoints
- ✅ Color contrast (WCAG AA)
- ✅ Keyboard navigation
- ✅ Screen reader compatibility
- ✅ Print layout
- ✅ Dark mode (if implemented)

---

## UX Design System References

**Primary Documentation:**
- `docs/ux/RESEARCH-AND-DESIGN-SYSTEM-ANALYSIS.md` - **Part 2: Insight 4 "Mobile-First for Gabriela During Maternity"** (PRIMARY)
- `docs/ux/RESEARCH-AND-DESIGN-SYSTEM-ANALYSIS.md` - Part 3: Design System Analysis (Shadcn/ui recommendation)
- `docs/ux/REQUIREMENTS-TRANSLATION-GUIDE.md` - Tailwind theme extension, responsive patterns
- Story 3.1 - `tailwind.config.ts` complete configuration

**Key Sections:**
- User Persona 1 (Gabriela): `RESEARCH-AND-DESIGN-SYSTEM-ANALYSIS.md` → Part 1
- Mobile-First Requirement: `RESEARCH-AND-DESIGN-SYSTEM-ANALYSIS.md` → Insight 4
- Shadcn/ui + Tailwind Stack: `RESEARCH-AND-DESIGN-SYSTEM-ANALYSIS.md` → Part 3
- Responsive Breakpoints: Story 3.1 → `tailwind.config.ts` → screens
- Color System: Story 3.1 → `tailwind.config.ts` → colors

**Shadcn/ui Responsive Components:**
- Dialog (responsive modal): https://ui.shadcn.com/docs/components/dialog
- Sheet (mobile drawer): https://ui.shadcn.com/docs/components/sheet
- Card (responsive cards): https://ui.shadcn.com/docs/components/card
- Accordion (collapsible sections): https://ui.shadcn.com/docs/components/accordion

**Design Rationale:**
- **Why mobile-first?** Gabriela (Director) accesses on iPad/mobile during maternity leave (UX Insight 4)
- **Why Tailwind?** Mobile-first approach built-in (base = mobile, `md:` = tablet, `lg:` = desktop)
- **Why Shadcn/ui?** Responsive components out-of-the-box, WCAG AA compliant, works with Tailwind
- **Why 375px breakpoint?** iPhone portrait mode (most common mobile device)
- **Why 768px breakpoint?** iPad portrait mode (Gabriela's primary device during maternity)
- **Why 1024px breakpoint?** Laptop screens (Architects' primary desktop work device)
- **Why ≥44px touch targets?** Apple Human Interface Guidelines + WCAG 2.5.5 (easier tapping on mobile)
- **Why WCAG 2.1 AA?** Professional product, legal compliance, ethical design

**Testing Devices (from UX Research):**
- **Gabriela (Director):** iPhone 13 Pro (375px), iPad Pro (768px)
- **Architects:** MacBook Pro 14" (1024px+), Dell monitors (1440px+)

---

## Change Log

| Date | Change |
|------|--------|
| 2026-02-08 | Created story |
| 2026-02-08 | Updated with UX design system guidelines (mobile-first responsive, Tailwind breakpoints, WCAG AA, component-specific patterns) |

---

**Related Stories:** 3.1-3.9 (All Epic 3 frontend stories - this story applies styling/responsive to all)
**Blocked By:** 3.1 (Frontend Setup - Tailwind config must exist)
**Blocks:** None (cross-cutting concern, final polish)
**Applies To:** Stories 3.4, 3.5, 3.6, 3.7, 3.8, 3.9 (adds responsive design to all components)

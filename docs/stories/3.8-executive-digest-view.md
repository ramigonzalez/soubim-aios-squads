# Story 3.8: Gabriela's Executive Digest View

**Story ID:** 3.8
**Assigned to:** @dev
**Sprint:** Sprint 5 (Week 7)
**Status:** Draft
**Estimation:** 5 story points (2-3 days)

---

## Summary

Build an executive digest view that summarizes decisions in a given time period, categorized by type (structural, cost, timeline, risks), with quick stats and printable layout for Gabriela's weekly review.

---

## Acceptance Criteria

- [ ] Fetch digest from `/api/projects/{id}/digest?date_from=X&date_to=Y`
- [ ] Date range selector (default: last 7 days)
- [ ] Quick stats section:
  - [ ] Total decisions count
  - [ ] Meetings count
  - [ ] Consensus percentage
  - [ ] High-impact decisions count
- [ ] Categorized highlights:
  - [ ] Structural Changes
  - [ ] Cost Impacts
  - [ ] Timeline Shifts
  - [ ] Risk Flags
- [ ] Each highlight shows:
  - [ ] Category title and count
  - [ ] Top 3-5 decisions
  - [ ] Links to full timeline view
- [ ] Printable layout (<2 pages)
- [ ] Export to PDF button (optional Phase 1.5)
- [ ] Tests passing: `npm run test` (80%+ coverage)

---

## Tasks

### Task 1: Create Digest Page Component (1 day)

Create `src/pages/Digest.tsx` with date range picker, stats dashboard, and categorized decision highlights using Chart.js or Recharts for visualizations.

### Task 2: Fetch Digest Data (0.5 days)

Integrate with digest API endpoint, handle date range changes, implement loading/error states, and add retry logic.

### Task 3: Create Printable Layout (0.5 days)

Add print-specific CSS, optimize for paper layout (A4/Letter), remove unnecessary UI elements in print mode, and add print button.

### Task 4: Add Highlight Categories (0.75 days)

Group decisions by impact type (structural, cost, timeline, risk), display top decisions per category, and add visual indicators for severity.

### Task 5: Write Tests (0.25 days)

Test digest rendering, date range selection, stats calculation, category display, and print layout.

---

## Dev Notes

### Digest Layout

```
Digest View
├── Header (project name, date range)
├── Quick Stats Cards (4 metrics)
├── Highlights by Category
│   ├── Structural Changes
│   ├── Cost Impacts
│   ├── Timeline Shifts
│   └── Risk Flags
└── Footer (generated timestamp, print button)
```

### Print Styling

```css
@media print {
  .no-print { display: none; }
  body { font-size: 11pt; }
  .page-break { page-break-after: always; }
}
```

---

## File List

**Modified/Created:**
- `src/pages/Digest.tsx` (new)
- `src/components/DigestStats.tsx` (new)
- `src/components/DigestHighlight.tsx` (new)
- `src/styles/print.css` (new)
- `tests/pages/Digest.test.tsx` (new)

---

## Testing Strategy

- ✅ Digest page rendering
- ✅ Date range selection
- ✅ Stats display
- ✅ Category grouping
- ✅ Print layout
- ✅ Empty state handling

---

## Change Log

| Date | Change |
|------|--------|
| 2026-02-08 | Created story |

---

**Related Stories:** 3.9 (Digest API), 3.10 (Styling)
**Blocked By:** 3.9
**Blocks:** None

# Story 3.1: Frontend Project Setup

**Story ID:** 3.1
**Assigned to:** @dev
**Sprint:** Sprint 4 (Week 6)
**Status:** Draft
**Estimation:** 5 story points (2 days)

---

## Summary

Scaffold a complete React + TypeScript frontend project with Vite, Tailwind CSS, React Query, Zustand, and routing. Establish project structure, build tooling, and development workflow for the DecisionLog dashboard.

---

## UX Research Context

This story establishes the foundation for all Epic 3 frontend stories and directly supports:

**Research Insight 4: Mobile-First for Gabriela During Maternity**
- Gabriela will access DecisionLog on iPad/iPhone during 2-3 month maternity leave
- Mobile-responsive design is non-negotiable from the start
- Responsive breakpoints: 375px (mobile), 768px (tablet), 1024px+ (desktop)

**Design System: Shadcn/ui (98/100 fit score)**
- Already integrated (Radix UI components in existing dependencies)
- Perfect Tailwind CSS synergy with copy-paste components
- Full customization for discipline colors
- WCAG AA compliant out-of-the-box
- **ROI:** 60 hours saved, $6,000 cost savings vs building from scratch

**Component Architecture: Atomic Design**
- Atoms: Button, Badge, Input, Select (Shadcn/ui)
- Molecules: DecisionCard, FilterPanel, ConsensusIndicator (Custom)
- Organisms: Timeline, DrillDownModal, ExecutiveDigest (Custom)
- Templates: DashboardLayout, DetailLayout
- Pages: ProjectsPage, ProjectDetailPage

**Reference:** `docs/ux/RESEARCH-AND-DESIGN-SYSTEM-ANALYSIS.md` (Part 3: Design System Analysis)

---

## Acceptance Criteria

- [ ] React 18 + TypeScript project created via Vite
- [ ] Project structure organized (Atomic Design hierarchy):
  - [ ] `src/components/atoms/` - Shadcn/ui base components (Button, Badge, Input, Select)
  - [ ] `src/components/molecules/` - Composed components (DecisionCard, FilterPanel, ConsensusIndicator)
  - [ ] `src/components/organisms/` - Complex features (Timeline, DrillDownModal, ExecutiveDigest)
  - [ ] `src/components/templates/` - Page layouts (DashboardLayout, DetailLayout)
  - [ ] `src/pages/` - Page components
  - [ ] `src/hooks/` - Custom React hooks
  - [ ] `src/services/` - API service layer
  - [ ] `src/store/` - Zustand state management
  - [ ] `src/types/` - TypeScript type definitions
  - [ ] `src/lib/` - Utilities (cn, formatDate, etc.)
- [ ] Dependencies installed:
  - [ ] React Router v6
  - [ ] React Query (TanStack Query) v5
  - [ ] Zustand v4
  - [ ] Tailwind CSS v3 + PostCSS + Autoprefixer
  - [ ] Shadcn/ui CLI + Radix UI primitives
  - [ ] Axios v1
  - [ ] clsx + tailwind-merge (for cn() utility)
  - [ ] date-fns (date formatting)
- [ ] Shadcn/ui components installed:
  - [ ] Card, Dialog, Badge, Tabs, Alert (for DrillDownModal, ExecutiveDigest)
  - [ ] Button, Input, Select (for Filters, Forms)
  - [ ] Separator, Avatar (for Timeline, DecisionCards)
- [ ] Tailwind configured with design system colors:
  - [ ] Discipline colors (architecture=#3B82F6, mep=#F97316, landscape=#10B981, structural=#8B5CF6, electrical=#F59E0B, plumbing=#06B6D4)
  - [ ] Consensus colors (agree=#10B981, mixed=#F59E0B, dissent=#EF4444)
  - [ ] Impact colors (high=#DC2626, medium=#F59E0B, low=#9CA3AF)
  - [ ] Responsive breakpoints (sm: 375px, md: 768px, lg: 1024px, xl: 1280px)
- [ ] Build process working:
  - [ ] `npm run dev` - Development server (port 5173)
  - [ ] `npm run build` - Production build
  - [ ] `npm run typecheck` - TypeScript validation
  - [ ] `npm run lint` - ESLint checks (no warnings)
  - [ ] `npm run preview` - Preview production build
- [ ] Environment variables configured (`.env.example`)
- [ ] Tests passing: `npm run test` (Vitest + Testing Library setup)
- [ ] Accessibility foundation:
  - [ ] Semantic HTML enabled (React components use proper HTML5 tags)
  - [ ] WCAG 2.1 AA color contrast ratios verified (4.5:1 minimum)
  - [ ] Focus visible styles configured in Tailwind
  - [ ] Screen reader support enabled (ARIA attributes in Shadcn/ui)

---

## Tasks

### Task 1: Initialize Vite + React + TypeScript Project (0.5 days)

1. **Create project**
   ```bash
   npm create vite@latest decision-log-frontend -- --template react-ts
   cd decision-log-frontend
   npm install
   ```

2. **Verify installation**
   ```bash
   npm run dev  # Should start on http://localhost:5173
   ```

3. **Update `tsconfig.json` for strict mode**
   ```json
   {
     "compilerOptions": {
       "target": "ES2020",
       "useDefineForClassFields": true,
       "lib": ["ES2020", "DOM", "DOM.Iterable"],
       "module": "ESNext",
       "skipLibCheck": true,
       "strict": true,
       "noUnusedLocals": true,
       "noUnusedParameters": true,
       "noFallthroughCasesInSwitch": true,
       "moduleResolution": "bundler",
       "allowImportingTsExtensions": true,
       "resolveJsonModule": true,
       "isolatedModules": true,
       "noEmit": true,
       "jsx": "react-jsx",
       "baseUrl": ".",
       "paths": {
         "@/*": ["./src/*"]
       }
     },
     "include": ["src"],
     "references": [{ "path": "./tsconfig.node.json" }]
   }
   ```

### Task 2: Install and Configure Dependencies (0.75 days)

1. **Install core dependencies**
   ```bash
   npm install react-router-dom
   npm install @tanstack/react-query
   npm install zustand
   npm install axios
   npm install date-fns  # Date formatting
   ```

2. **Install Tailwind CSS + Shadcn/ui**
   ```bash
   # Install Tailwind CSS
   npm install -D tailwindcss postcss autoprefixer
   npx tailwindcss init -p

   # Install Shadcn/ui dependencies
   npm install class-variance-authority clsx tailwind-merge
   npm install @radix-ui/react-dialog @radix-ui/react-select @radix-ui/react-tabs
   npm install lucide-react  # Icons

   # Initialize Shadcn/ui
   npx shadcn-ui@latest init
   # Select: New York style, Neutral gray, CSS variables for colors

   # Install core Shadcn/ui components
   npx shadcn-ui@latest add card
   npx shadcn-ui@latest add dialog
   npx shadcn-ui@latest add badge
   npx shadcn-ui@latest add tabs
   npx shadcn-ui@latest add alert
   npx shadcn-ui@latest add button
   npx shadcn-ui@latest add input
   npx shadcn-ui@latest add select
   npx shadcn-ui@latest add separator
   npx shadcn-ui@latest add avatar
   ```

3. **Configure Tailwind with DecisionLog Design System (`tailwind.config.ts`)**
   ```typescript
   import type { Config } from 'tailwindcss'

   export default {
     darkMode: ["class"],
     content: [
       './pages/**/*.{ts,tsx}',
       './components/**/*.{ts,tsx}',
       './app/**/*.{ts,tsx}',
       './src/**/*.{ts,tsx}',
     ],
     theme: {
       extend: {
         colors: {
           // Shadcn/ui base colors
           border: "hsl(var(--border))",
           input: "hsl(var(--input))",
           ring: "hsl(var(--ring))",
           background: "hsl(var(--background))",
           foreground: "hsl(var(--foreground))",
           primary: {
             DEFAULT: "hsl(var(--primary))",
             foreground: "hsl(var(--primary-foreground))",
           },
           secondary: {
             DEFAULT: "hsl(var(--secondary))",
             foreground: "hsl(var(--secondary-foreground))",
           },
           destructive: {
             DEFAULT: "hsl(var(--destructive))",
             foreground: "hsl(var(--destructive-foreground))",
           },
           muted: {
             DEFAULT: "hsl(var(--muted))",
             foreground: "hsl(var(--muted-foreground))",
           },
           accent: {
             DEFAULT: "hsl(var(--accent))",
             foreground: "hsl(var(--accent-foreground))",
           },
           popover: {
             DEFAULT: "hsl(var(--popover))",
             foreground: "hsl(var(--popover-foreground))",
           },
           card: {
             DEFAULT: "hsl(var(--card))",
             foreground: "hsl(var(--card-foreground))",
           },
           // DecisionLog Discipline Colors (from UX Research)
           discipline: {
             architecture: '#3B82F6',  // Blue
             mep: '#F97316',           // Orange
             landscape: '#10B981',     // Green
             structural: '#8B5CF6',    // Purple
             electrical: '#F59E0B',    // Amber
             plumbing: '#06B6D4',      // Cyan
           },
           // Consensus Colors
           consensus: {
             agree: '#10B981',         // Green
             mixed: '#F59E0B',         // Amber
             dissent: '#EF4444',       // Red
           },
           // Impact Severity Colors
           impact: {
             high: '#DC2626',          // Red 600
             medium: '#F59E0B',        // Amber 500
             low: '#9CA3AF',           // Gray 400
           },
         },
         // Mobile-first responsive breakpoints (from UX Research: Insight 4)
         screens: {
           'sm': '375px',   // Mobile
           'md': '768px',   // Tablet
           'lg': '1024px',  // Desktop
           'xl': '1280px',  // Large desktop
           '2xl': '1536px', // Extra large
         },
         borderRadius: {
           lg: "var(--radius)",
           md: "calc(var(--radius) - 2px)",
           sm: "calc(var(--radius) - 4px)",
         },
         keyframes: {
           "accordion-down": {
             from: { height: "0" },
             to: { height: "var(--radix-accordion-content-height)" },
           },
           "accordion-up": {
             from: { height: "var(--radix-accordion-content-height)" },
             to: { height: "0" },
           },
         },
         animation: {
           "accordion-down": "accordion-down 0.2s ease-out",
           "accordion-up": "accordion-up 0.2s ease-out",
         },
       },
     },
     plugins: [require("tailwindcss-animate")],
   } satisfies Config
   ```

4. **Install dev dependencies**
   ```bash
   npm install -D @types/node
   npm install -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
   npm install -D vitest @testing-library/react @testing-library/jest-dom
   ```

### Task 3: Create Project Structure (0.5 days)

1. **Create Atomic Design directory structure**
   ```bash
   # Atomic Design hierarchy (from UX Research)
   mkdir -p src/components/atoms      # Shadcn/ui base components
   mkdir -p src/components/molecules  # Composed components
   mkdir -p src/components/organisms  # Complex features
   mkdir -p src/components/templates  # Page layouts
   mkdir -p src/pages                 # Page components
   mkdir -p src/hooks                 # Custom React hooks
   mkdir -p src/services              # API service layer
   mkdir -p src/store                 # Zustand state management
   mkdir -p src/types                 # TypeScript type definitions
   mkdir -p src/lib                   # Utilities
   mkdir -p src/styles                # Global styles
   ```

2. **Create base TypeScript types (`src/types/index.ts`)**
   ```typescript
   export interface User {
     id: string
     email: string
     name: string
     role: 'director' | 'architect' | 'client'
   }

   export interface Project {
     id: string
     name: string
     description: string
     created_at: string
     member_count: number
     decision_count: number
     latest_decision: string | null
   }

   export interface Decision {
     id: string
     decision_statement: string
     who: string
     timestamp: string
     discipline: string
     meeting_type: string
     meeting_date: string
     why: string
     causation: string
     impacts: Impact[]
     consensus: Record<string, string>
     confidence: number
     anomaly_flags: AnomalyFlag[]
     created_at: string
   }

   export interface Impact {
     type: 'timeline' | 'budget' | 'scope'
     change: string
   }

   export interface AnomalyFlag {
     type: string
     severity: 'low' | 'medium' | 'high'
     description: string
   }
   ```

3. **Create utility functions (`src/lib/utils.ts`)**
   ```typescript
   import { type ClassValue, clsx } from "clsx"
   import { twMerge } from "tailwind-merge"

   /**
    * Combine Tailwind CSS classes with proper precedence
    * Used throughout the app for dynamic className composition
    */
   export function cn(...inputs: ClassValue[]) {
     return twMerge(clsx(inputs))
   }

   /**
    * Format date for display
    */
   export function formatDate(date: string): string {
     return new Date(date).toLocaleDateString('en-US', {
       year: 'numeric',
       month: 'short',
       day: 'numeric'
     })
   }

   /**
    * Get discipline color class
    * Maps discipline to Tailwind color from design system
    */
   export function getDisciplineColor(discipline: string): string {
     const colorMap: Record<string, string> = {
       'Architecture': 'text-discipline-architecture',
       'MEP': 'text-discipline-mep',
       'Landscape': 'text-discipline-landscape',
       'Structural': 'text-discipline-structural',
       'Electrical': 'text-discipline-electrical',
       'Plumbing': 'text-discipline-plumbing',
     }
     return colorMap[discipline] || 'text-gray-600'
   }

   /**
    * Get consensus color class
    */
   export function getConsensusColor(consensus: string): string {
     const colorMap: Record<string, string> = {
       'AGREE': 'bg-consensus-agree',
       'MIXED': 'bg-consensus-mixed',
       'DISSENT': 'bg-consensus-dissent',
     }
     return colorMap[consensus] || 'bg-gray-300'
   }

   /**
    * Get impact severity color class
    */
   export function getImpactColor(severity: 'high' | 'medium' | 'low'): string {
     const colorMap = {
       high: 'bg-impact-high',
       medium: 'bg-impact-medium',
       low: 'bg-impact-low',
     }
     return colorMap[severity]
   }
   ```

### Task 4: Configure React Query and Routing (0.5 days)

1. **Setup React Query Provider (`src/App.tsx`)**
   ```typescript
   import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
   import { BrowserRouter } from 'react-router-dom'
   import { Router } from './Router'

   const queryClient = new QueryClient({
     defaultOptions: {
       queries: {
         refetchOnWindowFocus: false,
         retry: 1,
         staleTime: 5 * 60 * 1000, // 5 minutes
       },
     },
   })

   function App() {
     return (
       <QueryClientProvider client={queryClient}>
         <BrowserRouter>
           <Router />
         </BrowserRouter>
       </QueryClientProvider>
     )
   }

   export default App
   ```

2. **Create Router (`src/Router.tsx`)**
   ```typescript
   import { Routes, Route, Navigate } from 'react-router-dom'
   import { LoginPage } from './pages/Login'
   import { ProjectsPage } from './pages/Projects'
   import { ProjectDetailPage } from './pages/ProjectDetail'

   export function Router() {
     return (
       <Routes>
         <Route path="/login" element={<LoginPage />} />
         <Route path="/projects" element={<ProjectsPage />} />
         <Route path="/projects/:id" element={<ProjectDetailPage />} />
         <Route path="/" element={<Navigate to="/projects" replace />} />
       </Routes>
     )
   }
   ```

3. **Create Zustand store (`src/store/authStore.ts`)**
   ```typescript
   import { create } from 'zustand'
   import { User } from '../types'

   interface AuthState {
     user: User | null
     isAuthenticated: boolean
     setUser: (user: User | null) => void
     logout: () => void
   }

   export const useAuthStore = create<AuthState>((set) => ({
     user: null,
     isAuthenticated: false,
     setUser: (user) => set({ user, isAuthenticated: !!user }),
     logout: () => set({ user: null, isAuthenticated: false }),
   }))
   ```

### Task 5: Configure Environment and Scripts (0.25 days)

1. **Create `.env.example`**
   ```env
   VITE_API_URL=http://localhost:8000/api
   VITE_APP_NAME=DecisionLog
   ```

2. **Update `package.json` scripts**
   ```json
   {
     "scripts": {
       "dev": "vite",
       "build": "tsc && vite build",
       "preview": "vite preview",
       "typecheck": "tsc --noEmit",
       "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
       "test": "vitest"
     }
   }
   ```

3. **Create ESLint config (`.eslintrc.cjs`)**
   ```javascript
   module.exports = {
     root: true,
     env: { browser: true, es2020: true },
     extends: [
       'eslint:recommended',
       'plugin:@typescript-eslint/recommended',
       'plugin:react-hooks/recommended',
     ],
     ignorePatterns: ['dist', '.eslintrc.cjs'],
     parser: '@typescript-eslint/parser',
     plugins: ['react-refresh'],
     rules: {
       'react-refresh/only-export-components': [
         'warn',
         { allowConstantExport: true },
       ],
     },
   }
   ```

---

## Dev Notes

### Project Structure

```
decision-log-frontend/
├── src/
│   ├── components/
│   │   ├── atoms/           # Shadcn/ui base components
│   │   │   ├── Button.tsx   # (from Shadcn/ui)
│   │   │   ├── Badge.tsx    # (from Shadcn/ui)
│   │   │   ├── Input.tsx    # (from Shadcn/ui)
│   │   │   ├── Select.tsx   # (from Shadcn/ui)
│   │   │   └── Avatar.tsx   # (from Shadcn/ui)
│   │   ├── molecules/       # Composed components
│   │   │   ├── DecisionCard.tsx
│   │   │   ├── FilterPanel.tsx
│   │   │   ├── ConsensusIndicator.tsx
│   │   │   └── ImpactBadge.tsx
│   │   ├── organisms/       # Complex features
│   │   │   ├── Timeline.tsx
│   │   │   ├── DrillDownModal.tsx
│   │   │   ├── ExecutiveDigest.tsx
│   │   │   └── FiltersSidebar.tsx
│   │   └── templates/       # Page layouts
│   │       ├── DashboardLayout.tsx
│   │       └── DetailLayout.tsx
│   ├── pages/               # Page-level components
│   │   ├── Login.tsx
│   │   ├── Projects.tsx
│   │   └── ProjectDetail.tsx
│   ├── hooks/               # Custom React hooks
│   │   ├── useAuth.ts
│   │   ├── useProjects.ts
│   │   └── useDecisions.ts
│   ├── services/            # API service layer
│   │   └── api.ts
│   ├── store/               # Zustand state
│   │   ├── authStore.ts
│   │   └── filterStore.ts
│   ├── types/               # TypeScript types
│   │   └── index.ts
│   ├── lib/                 # Utilities
│   │   └── utils.ts
│   ├── styles/              # Global styles
│   │   └── globals.css
│   ├── App.tsx
│   ├── Router.tsx
│   ├── main.tsx
│   └── index.css
├── public/
├── .env.example
├── package.json
├── vite.config.ts
├── tsconfig.json
├── tailwind.config.ts
├── components.json          # Shadcn/ui config
└── README.md
```

### Tech Stack

| Technology | Version | Purpose |
|-----------|---------|---------|
| React | 18.x | UI library |
| TypeScript | 5.x | Type safety |
| Vite | 5.x | Build tool |
| React Router | 6.x | Routing |
| React Query | 5.x | Data fetching |
| Zustand | 4.x | State management |
| Tailwind CSS | 3.x | Styling |
| Shadcn/ui | latest | Component library |
| Axios | 1.x | HTTP client |

---

## File List

**Modified/Created:**
- `package.json` (new)
- `vite.config.ts` (new)
- `tsconfig.json` (new)
- `tailwind.config.ts` (new)
- `.eslintrc.cjs` (new)
- `src/App.tsx` (new)
- `src/Router.tsx` (new)
- `src/types/index.ts` (new)
- `src/store/authStore.ts` (new)
- `src/lib/utils.ts` (new)
- `.env.example` (new)

---

## Testing Strategy

### Setup Verification Tests

```typescript
// tests/setup.test.tsx
import { describe, it, expect } from 'vitest'
import { render } from '@testing-library/react'
import App from '../src/App'

describe('Project Setup', () => {
  it('renders without crashing', () => {
    const { container } = render(<App />)
    expect(container).toBeTruthy()
  })

  it('has TypeScript configured', () => {
    const num: number = 42
    expect(typeof num).toBe('number')
  })
})
```

### Build Tests

```bash
# TypeScript check
npm run typecheck  # Should pass with no errors

# Lint check
npm run lint  # Should pass with no warnings

# Build check
npm run build  # Should create dist/ folder

# Dev server
npm run dev  # Should start on localhost:5173
```

---

## UX Design System References

**Primary Documentation:**
- `docs/ux/RESEARCH-AND-DESIGN-SYSTEM-ANALYSIS.md` - Design system analysis, Shadcn/ui recommendation
- `docs/ux/REQUIREMENTS-TRANSLATION-GUIDE.md` - Component architecture, Atomic Design
- `docs/ux/AIOS-WORKFLOW-INTEGRATION.md` - Implementation workflow

**Key Sections:**
- Design System Recommendation: `RESEARCH-AND-DESIGN-SYSTEM-ANALYSIS.md` → Part 3
- Tailwind Theme Extension: `RESEARCH-AND-DESIGN-SYSTEM-ANALYSIS.md` → Implementation Roadmap
- Component Breakdown: `REQUIREMENTS-TRANSLATION-GUIDE.md` → Part 3
- Atomic Design Hierarchy: `AIOS-WORKFLOW-INTEGRATION.md` → Step 2

**Shadcn/ui Documentation:**
- https://ui.shadcn.com/docs/installation/vite
- https://ui.shadcn.com/docs/components/card
- https://ui.shadcn.com/docs/components/dialog

---

## Change Log

| Date | Change |
|------|--------|
| 2026-02-08 | Created story |
| 2026-02-08 | Updated with UX design system guidelines (Shadcn/ui, Atomic Design, mobile-first, WCAG AA) |

---

**Related Stories:** 3.2 (API Service Layer), 3.3 (Authentication), 3.4 (Projects List), 3.5 (Timeline), 3.6 (Filters), 3.10 (Responsive Design)
**Blocked By:** None
**Blocks:** 3.2, 3.3, 3.4, 3.5, 3.6, 3.7, 3.8, 3.9, 3.10 (all Epic 3 frontend stories)

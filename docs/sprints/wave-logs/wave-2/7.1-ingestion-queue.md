# Story 7.1: Backend â€” Source Entity & Ingestion Queue

**Agent:** worktree-agent-aa67f043
**Duration:** ~8.7 min
**Status:** Complete
**Tests:** 35 new tests passing (79 total backend)

## Files Created
| File | Purpose |
|------|---------|
| `app/api/models/ingestion.py` | Pydantic models: IngestionUpdate, IngestionBatchAction, SourceResponse, SourceListResponse |
| `app/api/routes/ingestion.py` | Ingestion router: GET list, PATCH approve/reject, POST batch, GET count |
| `app/services/summary_service.py` | AI summary via Claude API (claude-sonnet-4-20250514, first 2000 chars) |
| `app/services/ingestion_pipeline.py` | ETL trigger: loads participants, calls extraction_v2, stores items, marks processed |
| `tests/unit/test_ingestion_api.py` | 35 unit tests across 8 test classes |

## Files Modified
| File | Changes |
|------|---------|
| `app/api/routes/webhooks.py` | Replaced placeholder with Source creation (pending), duplicate detection via webhook_id, 202 response |
| `app/main.py` | Added ingestion router import + registration |

## Key Decisions
- Background tasks use own DB session (SessionLocal) not request session
- AI summary uses `claude-sonnet-4-20250514` model
- ETL pipeline is async via FastAPI BackgroundTasks
- On extraction failure, source stays `approved` (not `processed`) for retry
- Admin check: `user.role == 'director'`

## Merge Notes
- Worktree was on older base (48210d1), missing WAVE 1 router imports
- Fixed main.py after merge to restore project_items, stages, participants routers
